<!DOCTYPE html>
<html lang="de" xmlns:th="http://www.thymeleaf.org" th:replace="~{mopslayout :: html(
    name='Gruppenbildung',
    title='Details',
    headcontent=~{fragments/general :: headcontent('details')},
    navigation=~{fragments/general :: nav('none')},
    bodycontent=~{:: bodycontent})}">

<body>

<main th:fragment="bodycontent">
    <div class="container-fluid">

        <h1 class="def-cursor overflow-hidden" style="text-overflow: ellipsis;" th:text="${group.getTitle()}"></h1>

        <div class="d-flex flex-row flex-wrap mr-n4 mt-n2">
            <!--Gruppendetails-->
            <div class="flex-grow-1 mr-4 mt-2" style="flex-basis: 65%;">

                <div class="content overflow-hidden" th:insert="~{fragments/groups :: groupcontent}"></div>


                <!--Integrationen-->
                <div class="d-flex flex-wrap mr-n2">
                    <!--Materialsammlung-->
                    <div class="content flex-grow-1 mr-2">

                    </div>

                    <!--Foren-->
                    <div class="content flex-grow-1 mr-2">

                    </div>

                    <!--Termine-->
                    <div class="content flex-grow-1 mr-2">

                    </div>

                    <!--Modulhandbuch-->
                    <div class="content flex-grow-1 mr-2">

                    </div>
                </div>

                <div class="content overflow-hidden">
                    <!--Button-Bar-->
                    <div class="d-flex flex-row flex-wrap mr-n2 mt-n2">
                        <a class="btn btn-primary flex-grow-1 mr-2 mt-2" style="max-width: 250px;" href="/gruppen2">Fertig</a>

                        <div class="ml-auto mr-2 mt-2 flex-grow-1" style="max-width: 250px;">
                            <form method="post" th:action="@{/gruppen2/details/{id}/leave(id=${group.getId()})}">
                                <button class="btn btn-danger w-100" type="submit">
                                    Gruppe verlassen
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!--Teilnehmerliste-->
            <div class="def-cursor flex-grow-1 mr-4 mt-2 mw-100 overflow-hidden">
                <!--Anzahl Text-->
                <div class="mb-2">
                    <span>Teilnehmer: </span>
                    <span th:text="${group.size() + ' von ' + group.getLimit()}"></span>
                </div>

                <!--Bearbeiten-Button-->
                <div class="mb-2" th:if="${group.isAdmin(principal.getId())}">
                    <form method="get"
                          th:action="@{/gruppen2/details/{id}/edit(id=${group.getId()})}">
                        <button class="btn btn-secondary btn-block">Gruppe verwalten</button>
                    </form>
                </div>

                <!--Liste-->
                <div class="members">
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between"
                            th:each="member : ${group.getMembers()}">
                            <span class="overflow-hidden" th:text="${member.format()}"></span>
                            <span class="overflow-hidden" th:replace="~{fragments/groups :: userbadges}"></span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>
